<div class="register-page">
  <header class="nav-header">
    <div class="logo-container">
      <a [routerLink]="['/home']" class="logo-title gradient-text">SPACE PONG</a>
    </div>
  </header>

  <main class="register-main">
    <app-card class="register-card slide-up" variant="game">
      <div class="register-content">
        <div class="card-header">
          <img src="../../../../assets/images/astronaut_white_user_def.png" alt="Astronaut" class="avatar glow-pulse">
          <h2 class="card-title">Create Your Account</h2>
          <p class="card-subtitle">Join the cosmic pong federation</p>
        </div>

        <form class="register-form" [formGroup]="form" (ngSubmit)="register()">
          <div class="form-grid">
            <app-input
              label="Email Address"
              type="email"
              placeholder="your.email@galaxy.space"
              formControlName="email"
              size="lg"
              [error]="email.touched && email.hasError('required') ? 'Email is required' : 
                       email.touched && email.hasError('email') ? 'Email must be valid' : undefined"
            ></app-input>

            <app-input
              label="Username"
              type="text"
              placeholder="Choose your call sign"
              formControlName="username"
              size="lg"
              [error]="username.touched && username.hasError('required') ? 'Username is required' : undefined"
            ></app-input>

            <app-input
              label="Password"
              type="password"
              placeholder="Create a secure password"
              formControlName="password"
              size="lg"
              [error]="password.touched && password.hasError('required') ? 'Password is required' : undefined"
            ></app-input>

            <app-input
              label="Confirm Password"
              type="password"
              placeholder="Confirm your password"
              formControlName="passwordConfirm"
              size="lg"
              [error]="passwordConfirm.touched && form.hasError('passwordsNotMatching') ? 'Passwords do not match' : undefined"
            ></app-input>
          </div>

          <div class="avatar-upload-section">
            <label for="fileUpload" class="upload-label">Choose Your Avatar</label>
            <div class="upload-area">
              <input class="upload-input" type="file" #fileUpload id="fileUpload" name="fileUpload" accept="image/*" (change)="onFileSelected()">
              <span class="upload-placeholder">Click to select an image</span>
            </div>
          </div>

          <div class="form-actions">
            <app-button
              variant="primary"
              size="lg"
              type="submit"
              [disabled]="!form.valid || username.value.length > 8"
              [loading]="isLoading"
            >
              <i class="fas fa-user-plus"></i>
              Register & Launch
            </app-button>
          </div>
        </form>

        <div class="login-prompt">
          <span>Already have an account?</span>
          <a [routerLink]="['../login']" class="login-link">Log In</a>
        </div>
      </div>
    </app-card>
  </main>

  <div class="stars-bg"></div>
</div>
